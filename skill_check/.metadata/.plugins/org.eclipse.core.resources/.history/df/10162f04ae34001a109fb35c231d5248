package baekjoon_tree;
import java.util.*;
public class baekjoon_1991 {
	static String[][] arr;
	static void pre(int x) {
		if(!arr[x][1].equals(".")) pre(arr[x][1].charAt(0) - 'A');
		System.out.print(arr[x][0]);
		if(!arr[x][2].equals(".")) pre(arr[x][2].charAt(0) - 'A');
	}
	static void in(int x) {
		System.out.print(arr[x][0]);
		if(!arr[x][1].equals(".")) pre(arr[x][1].charAt(0) - 'A');
		if(!arr[x][2].equals(".")) pre(arr[x][2].charAt(0) - 'A');
	}
	static void post(int x) {
		if(!arr[x][1].equals(".")) pre(arr[x][1].charAt(0) - 'A');
		if(!arr[x][2].equals(".")) pre(arr[x][2].charAt(0) - 'A');
		System.out.print(arr[x][0]);
	}
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		int n = sc.nextInt(); sc.nextLine();
		arr = new String[n][];
		for(int i = 0; i < n; i++) arr[i] = sc.nextLine().split(" ");
		pre(0); System.out.println();
		in(0); System.out.println();
		post(0); System.out.println();
	}
}
